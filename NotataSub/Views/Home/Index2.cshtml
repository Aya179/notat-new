@{
    ViewData["Title"] = "Index2";
    Layout = "~/Views/Shared/_Layout1.cshtml";
}


<section class="content">
    <div class="container-fluid">
        <!-- Small boxes (Stat box) -->
        <div class="row">
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-info">
                    <div class="inner">
                        <h3>@ViewBag.count</h3>


                        <p >الكتب</p>
                    </div>
                    @*<div class="icon">
                        <i class="ion ion-bag"></i>
                    </div>*@
                    <a href="/Books/Index" class="small-box-footer">المزيد من المعلومات <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <!-- ./col -->
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3>@ViewBag.count1</h3>

                        <p >الكتٌاب</p>
                    </div>
                    
                    <a href="/Writers/index" class="small-box-footer">المزيد من المعلومات <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <!-- ./col -->
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-warning">
                    <div class="inner">
                        <h3>@ViewBag.count2</h3>

                        <p >الزبائن</p>
                    </div>
                    
                    <a href="/Clients/Index" class="small-box-footer">المزيد من المعلومات <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3>@ViewBag.count3</h3>

                        <p>الفئات</p>
                    </div>
                   
                    <a href="/Catogaries/index" class="small-box-footer">المزيد من المعلومات <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <div class="row col-12">

                <div class="col-6">


                    <div class="card">

                        <div class="card-header">
                            <h3 class="card-title float-right">
                                الكتب التي تم شراؤها

                            </h3>

                        </div>

                        <div class="card-body">
                            <div class="table-responsive pt-2">
                                <table class="table table-striped" id="courses_table">
                                    <thead>
                                        <tr>
                                            <th style="text-align:center;">
                                                عنوان الكتاب
                                            </th>
                                            <th style="text-align:center;">
                                                اسم الزبون
                                            </th>

                                        </tr>
                                    </thead>
                                    <tbody id="client">
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-6">


                    <div class="card">

                        <div class="card-header">
                            <h3 class="card-title float-right">
                                الكتب الأكثر مبيعاً
                                
                            </h3>
                            
                        </div>

                        <div class="card-body">
                            <div class="table-responsive pt-2">
                                <table class="table table-striped" id="courses_table">
                                    <thead>
                                        <tr >
                                            <th style="text-align:center;">
                                                عنوان الكتاب
                                               </th>
                                            <th style="text-align:center;">
                                               سعر الكتاب
                                           </th>
                                           <th> عدد مرات الشراء</th>
                                        </tr>
                                    </thead>
                                    <tbody id="book">
                                       
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>

              

            </div>


            <!-- ./col -->
            <!-- ./col -->
        </div>

    </div><!-- /.container-fluid -->

</section>
@section Scripts{
    <script>
        $(document).ready(function () {


            $.get("/Books/TOp5Books", function (data) {

                var table_tr = ""


                for (var i = 0; i < data.length; i++) {

                    table_tr += `
                                                                                 <tr>
                                                                                                         <td style="text-align: center;"> `+ data[i].booktitle + ` </td>
                                                                                                                      <td style="text-align: center;"> `+ data[i].bookPrice + ` </td>
                                                                                                                      <td style="text-align: center;"> `+ data[i].count + ` </td>

                                                                                                                       




                                                                                   </tr>`;



                }


                document.getElementById('book').innerHTML = table_tr;





            });


            $.get("/Books/ClientBooks", function (data) {

                var table_tr2 = ""


                for (var i = 0; i < data.length; i++) {

                    table_tr2 += `
                                                                                         <tr>
                                                                                                                         <td style="text-align: center;"> `+ data[i].booktitle + ` </td>
                                                                                                                                      <td style="text-align: center;"> `+ data[i].clientName + ` </td>






                                                                                           </tr>`;



                }


                document.getElementById('client').innerHTML = table_tr2;





            });

        });
    </script>
}